<!DOCTYPE html>
<html lang="en">
<head>
	<title>otto</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://fonts.googleapis.com/css?family=Merriweather:400,700" rel="stylesheet">
	<link rel="shortcut icon" href="../static/favicon.png" type="image/x-icon"/>
    <link href="../static/css/base.css" type="text/css" rel="stylesheet" />
    <script src="../static/js/prism.js"></script>
    <link href="../static/css/prism.css" type="text/css" rel="stylesheet" />
    <style>
        .demo { max-width: 700px; margin: 0 auto; }
        .otto-ul { padding: 0; margin: 0; }
        .otto-li { padding: 6px; margin: 0; }
        .otto-selected { background-color: #f2f2f2; }
        .otto-div { border: 1px solid lightgrey; -webkit-transition: all 0.5s; transition: all 0.5s; }
        .otto-demo { width: 100%; margin: 0 auto; height: 2.2em; padding: 0.5em; font-size: 1em; }
        hr { margin: 2.2em 0; }
        code { font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; }
        pre {
            color: #f8f8f2;
            background: #272822;
            padding: 1.331em;
            margin: .615em 0;
            overflow: auto;
            text-align: left;
            border-radius: .3em;
            line-height: 1.5;
            text-shadow: 0 1px rgba(0,0,0,.3);
        }
    </style>
</head>

<body>
	<div class="container">

        <header>
            <h1 class="title">otto.js</h1>
            <div style="text-align: center;">
                <p>A simple, lightweight, vanilla JavaScript autocomplete plugin that weighs under 3kb (minified and gzipped).</p>
                <p>For more info, see the <a href="https://github.com/kevinfiol/otto">Github repo</a>.</p>
            </div>
        </header>

        <hr>
        <h3>Usage</h3>
        <div class="demo">
            <pre><code class="language-markup">npm install otto-complete --save</code></pre>
            or
            <pre><code class="language-markup">&lt;script src="https://unpkg.com/otto-complete/otto.min.js">&lt;/script></code></pre>
            You may include the optional styles as well:
            <pre><code class="language-css">.otto-ul { padding: 0; margin: 0; }
.otto-li { padding: 6px; margin: 0; }
.otto-selected { background-color: #f2f2f2; }
.otto-div { border: 1px solid lightgrey; -webkit-transition: all 0.5s; transition: all 0.5s; }</code></pre>
        </div>

        <hr>
        <h3>Local Data</h3>
        <div class="demo">
            <input id="demo1" class="otto-demo" type="text"></input>
            <pre><code class="language-javascript">var choices = [
    { label: 'Alabama' },
    { label: 'Alaska' },
    { label: 'Michigan' },
    { label: 'Minnesota' },
    { label: 'Wyoming' }
];

var otto = new Otto(document.getElementById('demo1'), { minChars: 2 }, choices);</code></pre>
        </div>

        <hr>
        <h3>XHR / AJAX</h3>
        <p>This example uses the <a href="https://swapi.co/">Star Wars API.</a></p>
        <p>Note: When using AJAX to retrieve results, it's a good idea to abort unfinished requests before creating new ones.</p>
        <div class="demo">
            <input id="demo2" class="otto-demo" placeholder="Try searching for 'Darth Vader'" type="text"></input>
            <pre><code class="language-javascript">var xhr = null;
var sourceFunc = function(query, done) {
    // Abort last request
    if (xhr) {
        xhr.abort();
    }

    xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://swapi.co/api/people/?search=' + query, true);

    xhr.onload = function () {
        if (xhr.status >= 200 && xhr.status < 400) {
            // Parse the response here...
            var choices = [];
            var json = JSON.parse(xhr.responseText);

            json.results.forEach(function(person) {
                choices.push({ label: person.name });
            });

            done(choices);
        } else {
            // Else return empty array
            done([]);
        }
    };

    // Returns empty array onerror
    xhr.onerror = function() { 
        done([]);
    };
    
    xhr.send();
};

var otto = new Otto(document.getElementById('demo2'), { 
    minChars: 3, 
    source: sourceFunc 
});</code></pre>
        </div>


    </div>
    <script src="https://unpkg.com/otto-complete/otto.min.js"></script>
    <script>
        document.onreadystatechange = function () {
            if (document.readyState === 'interactive') {
                setTimeout(function() {
                    var choices = [
                        { label: 'Alabama' },
                        { label: 'Alaska' },
                        { label: 'Michigan' },
                        { label: 'Minnesota' },
                        { label: 'Wyoming' }
                    ];

                    var demo1 = new Otto(document.getElementById('demo1'), { minChars: 2 }, choices);

                    var request;
                    var source = function(query, done) {
                        if (request) {
                            request.abort();
                        }
                        request = new XMLHttpRequest();
                        request.open('GET', 'https://swapi.co/api/people/?search=' + query, true);
                        request.onerror = function() { done([]); };
                        request.onload = function () {
                            if (request.status >= 200 && request.status < 400) {
                                var choices = [];
                                // Parse Results
                                var json = JSON.parse(request.responseText);
                                json.results.forEach(function(person) {
                                    choices.push({ label: person.name });
                                });
                                done(choices);
                            } else {
                                done([]);
                            }
                        };
                        
                        request.send();
                    };

                    var demo2 = new Otto(document.getElementById('demo2'), { minChars: 3, maxResults: 5, source: source });
                }, 500);
            }
        }
    </script>
</body>
</html>


